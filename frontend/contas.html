<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contas a Pagar/Receber - Sistema Financeiro Finco</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/auth.js"></script>
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <img src="assets/logo-finco.png" alt="Finco" class="header-logo">
        <h1 class="header-titulo">Sistema Financeiro</h1>
        <div class="header-busca">
            <input type="text" id="busca-global" class="busca-input" placeholder="Buscar lançamentos..." onkeypress="if(event.key==='Enter') buscarGlobal()">
            <button class="btn btn-sm btn-primary" onclick="buscarGlobal()">Buscar</button>
        </div>
        <div class="header-user">
            <span id="usuario-logado">Admin</span>
            <button class="btn btn-sm btn-secondary" onclick="fazerLogout()" title="Sair">Sair</button>
        </div>
    </header>

    <!-- NAVEGAÇÃO -->
    <nav class="nav-menu">
        <ul>
            <li><a href="index.html">Dashboard</a></li>
            <li><a href="lancamentos.html">Lançamentos</a></li>
            <li><a href="contas.html" class="active">Contas</a></li>
            <li><a href="fluxo-caixa.html">Fluxo de Caixa</a></li>
            <li><a href="relatorios.html">Relatórios</a></li>
            <li><a href="importar-nfe.html">Importar NFe</a></li>
            <li><a href="configuracoes.html">Configurações</a></li>
        </ul>
    </nav>

    <!-- CONTAINER PRINCIPAL -->
    <main class="container">
        <h2 class="page-title">Contas a Pagar e Receber</h2>

        <!-- ALERTAS DE VENCIMENTO -->
        <div id="alertas-vencimento"></div>

        <!-- RESUMO -->
        <section class="indicadores-grid-4 mb-3">
            <div class="indicador-card">
                <div class="indicador-label">A Receber (Pendente)</div>
                <div class="indicador-valor positivo" id="total-receber">R$ --</div>
                <div class="indicador-subtexto" id="qtd-receber">0 contas</div>
            </div>
            <div class="indicador-card">
                <div class="indicador-label">A Pagar (Pendente)</div>
                <div class="indicador-valor negativo" id="total-pagar">R$ --</div>
                <div class="indicador-subtexto" id="qtd-pagar">0 contas</div>
            </div>
            <div class="indicador-card alerta-baixo" id="card-vencidas" style="display: none;">
                <div class="indicador-label">Vencidas</div>
                <div class="indicador-valor" id="total-vencidas">R$ --</div>
                <div class="indicador-subtexto" id="qtd-vencidas">0 contas</div>
            </div>
            <div class="indicador-card alerta-alto" id="card-vence-hoje" style="display: none;">
                <div class="indicador-label">Vence Hoje</div>
                <div class="indicador-valor" id="total-vence-hoje">R$ --</div>
                <div class="indicador-subtexto" id="qtd-vence-hoje">0 contas</div>
            </div>
        </section>

        <!-- FILTROS -->
        <section class="filtros-container mb-3">
            <div class="filtros-grid">
                <div class="form-group">
                    <label class="form-label">Tipo</label>
                    <select id="filtro-tipo" class="form-control" onchange="carregarContas()">
                        <option value="">Todos</option>
                        <option value="ENTRADA">A Receber</option>
                        <option value="SAIDA">A Pagar</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Período</label>
                    <select id="filtro-periodo" class="form-control" onchange="carregarContas()">
                        <option value="vencidas">Vencidas</option>
                        <option value="hoje">Vence Hoje</option>
                        <option value="7dias" selected>Próximos 7 dias</option>
                        <option value="15dias">Próximos 15 dias</option>
                        <option value="30dias">Próximos 30 dias</option>
                        <option value="mes">Este Mês</option>
                        <option value="todas">Todas Pendentes</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ordenar por</label>
                    <select id="filtro-ordem" class="form-control" onchange="carregarContas()">
                        <option value="data">Data de Vencimento</option>
                        <option value="valor">Valor</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- TABELA DE CONTAS -->
        <section class="card">
            <div class="card-header">
                <span>Contas Pendentes</span>
                <span id="contador-contas" class="text-muted">0 registros</span>
            </div>
            <div class="card-body">
                <div class="tabela-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Vencimento</th>
                                <th>Status</th>
                                <th>Tipo</th>
                                <th>Classificação</th>
                                <th>Item/Fornecedor</th>
                                <th class="text-right">Valor</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="tabela-contas">
                            <tr>
                                <td colspan="7" class="text-center">Carregando...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <script src="js/api.js"></script>
    <script src="js/contas.js"></script>
</body>
</html>
